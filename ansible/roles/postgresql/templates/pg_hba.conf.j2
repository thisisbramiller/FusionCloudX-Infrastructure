# ==============================================================================
# PostgreSQL Client Authentication Configuration File (pg_hba.conf)
# ==============================================================================
# Generated by Ansible - DO NOT EDIT MANUALLY
# Managed by: roles/postgresql/templates/pg_hba.conf.j2
# ==============================================================================
#
# This file controls: which hosts are allowed to connect, how clients
# are authenticated, which PostgreSQL user names they can use, which
# databases they can access.
#
# TYPE  DATABASE        USER            ADDRESS                 METHOD
# ==============================================================================

{% for entry in postgresql_hba_entries %}
{% if entry.type == 'local' %}
{{ "{:<8}{:<16}{:<16}{}".format(entry.type, entry.database, entry.user, entry.method) }}
{% elif entry.address is defined %}
{{ "{:<8}{:<16}{:<16}{:<24}{}".format(entry.type, entry.database, entry.user, entry.address, entry.method) }}
{% else %}
{{ "{:<8}{:<16}{:<16}{}".format(entry.type, entry.database, entry.user, entry.method) }}
{% endif %}
{% endfor %}

# ==============================================================================
# Additional Notes:
# ==============================================================================
# - "local" is for Unix domain socket connections only
# - "host" is for TCP/IP connections (SSL or non-SSL)
# - "hostssl" is for SSL connections only
# - "hostnossl" is for non-SSL connections only
#
# METHODS:
# - trust: Allow connection unconditionally (NOT RECOMMENDED for production)
# - reject: Reject connection unconditionally
# - scram-sha-256: SCRAM-SHA-256 authentication (RECOMMENDED)
# - md5: MD5 password authentication (legacy, less secure)
# - password: Clear-text password (NOT RECOMMENDED)
# - peer: Obtain username from operating system (local only)
# ==============================================================================

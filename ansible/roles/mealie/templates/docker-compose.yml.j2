---
services:
  mealie:
    image: {{ mealie_image }}
    container_name: mealie
    restart: always
    volumes:
      - mealie-data:/app/data/
    env_file:
      - .env

  nginx:
    image: nginx:mainline-alpine
    container_name: mealie-nginx
    restart: always
    ports:
      - "{{ mealie_https_port }}:443"
    depends_on:
      - mealie
    volumes:
      - {{ mealie_ssl_cert }}:/etc/nginx/ssl/server.crt:ro
      - {{ mealie_ssl_key }}:/etc/nginx/ssl/server.key:ro
      - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro

volumes:
  mealie-data:
